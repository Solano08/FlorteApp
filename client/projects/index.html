<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Proyectos</title>
  <link rel="stylesheet" href="projects.css" />
</head>
<body>
  <header class="page-header">
    <h1>Proyectos</h1>
    <button id="new-project-btn" class="profile-action">+ Nuevo proyecto</button>
  </header>

  <section class="projects-grid" aria-label="Proyectos registrados">
    <article class="project-card">
      <img src="https://placehold.co/600x360/1e1e2f/ffffff?text=Portada" alt="Portada del proyecto" class="project-cover" />
      <div class="project-body">
        <h2 class="project-title">Proyecto de ejemplo</h2>
        <p class="project-description">Descripción corta del proyecto para ilustrar la tarjeta.</p>
        <div class="project-meta">
          <span class="label">Enfoque:</span>
          <span class="value">Investigación</span>
        </div>
      </div>
    </article>
  </section>

  <dialog id="new-project-dialog" class="project-dialog">
    <form method="dialog" class="project-form">
      <header class="dialog-header">
        <h2>Registrar nuevo proyecto</h2>
        <button type="button" id="close-dialog" class="icon-btn" aria-label="Cerrar">×</button>
      </header>

      <label class="field">
        <span>Nombre del proyecto</span>
        <input type="text" name="nombre" placeholder="Ingrese el nombre" required />
      </label>

      <label class="field">
        <span>Descripción</span>
        <textarea name="descripcion" placeholder="Añade una breve descripción" rows="3" required></textarea>
      </label>

      <label class="field">
        <span>Portada del proyecto</span>
        <input type="url" name="portada" placeholder="URL de la imagen de portada" />
      </label>

      <label class="field">
        <span>Enfoque</span>
        <select name="enfoque" required>
          <option value="">Selecciona un enfoque</option>
          <option>Investigación</option>
          <option>Desarrollo</option>
          <option>Diseño</option>
          <option>Pruebas</option>
        </select>
      </label>

      <div class="form-actions">
        <button type="submit" class="primary">Guardar proyecto</button>
        <button type="button" id="cancel-dialog" class="ghost">Cancelar</button>
      </div>
    </form>
  </dialog>

  <script>
    const dialog = document.getElementById('new-project-dialog');
    const openBtn = document.getElementById('new-project-btn');
    const closeBtn = document.getElementById('close-dialog');
    const cancelBtn = document.getElementById('cancel-dialog');

    function openDialog() {
      if (typeof dialog.showModal === 'function') {
        dialog.showModal();
      } else {
        dialog.setAttribute('open', 'true');
      }
    }

    function closeDialog() {
      if (typeof dialog.close === 'function') {
        dialog.close();
      } else {
        dialog.removeAttribute('open');
      }
    }

    openBtn.addEventListener('click', openDialog);
    closeBtn.addEventListener('click', closeDialog);
    cancelBtn.addEventListener('click', closeDialog);

    dialog.addEventListener('click', (event) => {
      const rect = dialog.getBoundingClientRect();
      const clickedInDialog =
        rect.top <= event.clientY &&
        event.clientY <= rect.top + rect.height &&
        rect.left <= event.clientX &&
        event.clientX <= rect.left + rect.width;

      if (!clickedInDialog) {
        closeDialog();
      }
    });
  </script>
</body>
</html>
